"use strict";(self.webpackChunk_frm_in=self.webpackChunk_frm_in||[]).push([[540,994,193,801],{7994:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(8063),i=a(9496),s=a(5274),o=a(9892),l=a(3681),r=a(3105),d=a(4222),c=a(4637);const f=function(e){e.setSnackbar;var t=e.className,a=void 0===t?"":t,f=(0,i.useState)([]),u=f[0],m=f[1],h=(0,i.useState)([]),g=h[0],p=h[1],_=(0,o.FV)(l.pU),v=_[0],b=_[1],x=(0,o.Zl)(l.Pw);return(0,i.useEffect)((function(){(0,r.Z)({},v.triggered_entity.toLowerCase()+"/get",null,"GET").then((function(e){if(e.success){var t;m(e.data);var a={};null==(t=e.data)||t.map((function(e){a[e.id]=e.post_id})),p(a)}}))}),[]),(0,c.jsxs)("div",{className:""+(a||"flx"),children:[(0,c.jsx)("b",{className:"wdt-200 d-in-b",children:(0,d.__)(" Form/Task Name ")}),(0,c.jsxs)("select",{name:"triggered_entity_id",value:v.triggered_entity_id,onChange:function(e){var t=(0,n.Z)({},v),a=e.target,i=a.name,o=a.value;t[i]=o,b(t);var l,c={id:o};"Elementor"===v.triggered_entity&&(c=(0,n.Z)({},c,{postId:null!=(l=g[o])?l:v.flow_details.postId}));var f=(0,r.Z)(c,v.triggered_entity.toLowerCase()+"/get/form").then((function(e){return e.success&&x(e.data.fields),e.data}));s.ZP.promise(f,{success:(0,d.__)("Form fields Refresh successfully"),error:(0,d.__)("Error Occurred"),loading:(0,d.__)("Loading Form Fields...")})},className:"btcd-paper-inp w-7 "+a,children:[(0,c.jsx)("option",{value:"",children:(0,d.__)("Select Form")}),null==u?void 0:u.map((function(e){return(0,c.jsx)("option",{value:e.id,children:e.title},e.id)}))]})]})}},2005:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(9496),i=a(9892),s=a(3681),o=a(3105),l=a(9579),r=a(4222),d=a(1675),c=a(7464),f=a(4637);const u=function(e){var t,a=e.setSnackbar,u=(0,i.FV)(s.pU),m=u[0],h=u[1],g=(0,i.Zl)(s.Pw),p=(0,n.useState)(!1),_=p[0],v=p[1],b=(0,i.sJ)(s.qn).api,x=m.triggered_entity_id;return(0,f.jsxs)("div",{className:"flx mt-3",children:[(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,r.__)("Webhook URL:","integration-for-zoho-campaigns-and-cf7")}),(0,f.jsxs)("div",{className:"w-5",children:[(0,f.jsx)(c.Z,{value:b.base+"/callback/"+x,className:"field-key-cpy w-10 ml-0",setSnackbar:a,readOnly:!0}),(0,f.jsxs)("button",{onClick:function(){v(!0);var e=setInterval((function(){(0,o.Z)({hook_id:x},"webhook/test").then((function(t){if(t.success){clearInterval(e);var a=t.data.webhook;"object"===typeof t.data.webhook&&(a=Object.keys(t.data.webhook).map((function(e){return{name:e,label:t.data.webhook[e]+"-"+e,type:"text"}}))),g(a);var n=(0,l.p$)(m);n.flow_details.fields=a,h(n),(0,o.Z)({hook_id:x},"webhook/test/remove"),v(!1)}}))}),1500)},className:"btn btcd-btn-lg green sh-sm flx mt-1 ml-1",type:"button",children:[null!=(t=m.triggerDetail)&&t.data?(0,r.__)("Fetched ✔","integration-for-zoho-campaigns-and-cf7"):(0,r.__)("Fetch","integration-for-zoho-campaigns-and-cf7"),_&&(0,f.jsx)(d.Z,{size:"20",clr:"#022217",className:"ml-2"})]})]})]})}},9193:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(8063),i=a(9496),s=a(4222),o=a(9708),l=a(1675),r=a(5723),d=a(4637);function c(e){var t,a,c,f,u=e.step,m=e.saveConfig,h=e.edit,g=e.disabled,p=e.isLoading,_=e.dataConf,v=void 0===_?null:_,b=e.setDataConf,x=void 0===b?null:b,j=e.formFields,k=void 0===j?[]:j;(0,i.useEffect)((function(){if(v&&(null==v||!v.condition)){var e=(0,n.Z)({},v);e.condition={action_behavior:"",actions:[{field:"",action:"value"}],logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]},x(e)}}),[]);var C=function(e,t){var a=(0,n.Z)({},v);a.condition.action_behavior=t?e:"",x(a)};return(0,d.jsxs)("div",{children:[(null==v?void 0:v.condition)&&h&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flx",children:(0,d.jsx)(r.Z,{onChange:function(e){return C(e.target.value,e.target.checked)},checked:"cond"===(null==v||null==(t=v.condition)?void 0:t.action_behavior),className:"wdt-200 mt-4 mr-2",value:"cond",title:(0,s.__)("Conditional Logics","integration-for-zoho-campaigns-and-cf7")})}),(0,d.jsx)("br",{}),"cond"===(null==v||null==(a=v.condition)?void 0:a.action_behavior)&&(0,d.jsx)(o.Z,{formFields:k,dataConf:v,setDataConf:x})]}),(null==v?void 0:v.condition)&&2===u&&!h&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flx pl-2",children:(0,d.jsx)(r.Z,{onChange:function(e){return C(e.target.value,e.target.checked)},checked:"cond"===(null==v||null==(c=v.condition)?void 0:c.action_behavior),className:"wdt-200 mt-4 mr-2",value:"cond",title:(0,s.__)("Conditional Logics","integration-for-zoho-campaigns-and-cf7")})}),(0,d.jsx)("br",{}),"cond"===(null==v||null==(f=v.condition)?void 0:f.action_behavior)&&(0,d.jsx)(o.Z,{formFields:k,dataConf:v,setDataConf:x})]}),h?(0,d.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,d.jsxs)("button",{onClick:m,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:p||g,children:[(0,s.__)("Update"),p&&(0,d.jsx)(l.Z,{size:20,clr:"#022217",className:"ml-2"})]})}):(0,d.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===u&&"100%",height:3===u&&"auto"},children:[(0,d.jsx)("h2",{className:"ml-3",children:(0,s.__)("Successfully Integrated")}),(0,d.jsxs)("button",{onClick:m,className:"btn btcd-btn-lg green sh-sm",type:"button",disabled:p,children:[(0,s.__)("Finish & Save "),"✔",p&&(0,d.jsx)(l.Z,{size:20,clr:"#022217",className:"ml-2"})]})]})]})}},8540:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(9496),i=a(3442),s=a(9892),o=a(3681),l=a(4222),r=a(1890),d=a(7994),c=a(5672),f=a(2005),u=a(9193),m=a(6327),h=a(7498),g=a(4637);const p=function(e){var t=e.allIntegURL,a=(0,i.k6)(),p=(0,i.UO)(),_=(p.id,p.formID),v=(0,s.FV)(o.tD),b=v[0],x=v[1],j=(0,s.FV)(o.pU),k=j[0],C=j[1],w=(0,n.useState)(!1),F=w[0],y=w[1],N=(0,n.useState)({show:!1}),z=N[0],Z=N[1],I=(0,s.sJ)(o.Pw);return(0,g.jsxs)("div",{style:{width:900},children:[(0,g.jsx)(r.Z,{snack:z,setSnackbar:Z}),(0,g.jsxs)("div",{className:"flx mt-3",children:[(0,g.jsx)("b",{className:"wdt-100 d-in-b",children:(0,l.__)("Integration Name:","integration-for-zoho-campaigns-and-cf7")}),(0,g.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,m.handleInput)(e,_,b,x)},name:"name",value:b.name,type:"text",placeholder:(0,l.__)("Integration Name...","integration-for-zoho-campaigns-and-cf7")})]}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),!(0,c.checkWebhookIntegrationsExist)(k.triggered_entity)&&(0,g.jsx)(d.default,{setSnackbar:Z}),(0,c.checkWebhookIntegrationsExist)(k.triggered_entity)&&(0,g.jsx)(f.default,{setSnackbar:Z}),(0,g.jsx)(h.default,{formID:_,formFields:I,handleInput:function(e){return(0,m.handleInput)(e,_,b,x,y,Z)},campaignsConf:b,setCampaignsConf:x,isLoading:F,setIsLoading:y,setSnackbar:Z}),(0,g.jsx)(u.default,{edit:!0,saveConfig:function(){(0,m.checkMappedFields)(b)?(0,c.saveActionConf)({flow:k,setFlow:C,allIntegURL:t,conf:b,history:a,edit:1,setIsLoading:y,setSnackbar:Z}):Z({show:!0,msg:(0,l.__)("Please map mandatory fields","integration-for-zoho-campaigns-and-cf7")})},disabled:""===b.list||""===b.table||b.field_map.length<1,isLoading:F,dataConf:b,setDataConf:x,formFields:I})]})}},6327:(e,t,a)=>{a.r(t),a.d(t,{checkMappedFields:()=>f,handleInput:()=>l,listChange:()=>r,refreshContactFields:()=>c,refreshLists:()=>d,setGrantTokenResponse:()=>o});var n=a(8063),i=a(4222),s=a(3105),o=function(){var e={},t=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");t&&t.forEach((function(t){var a=t.split("=");a[1]&&(e[a[0]]=a[1])})),localStorage.setItem("__zohoCampaigns",JSON.stringify(e)),window.close()},l=function(e,t,a,i,s,o){var l=(0,n.Z)({},a);if(l[e.target.name]=e.target.value,"list"===e.target.name)l=r(l,t,i,s,o);i((0,n.Z)({},l))},r=function(e,t,a,i,s){var o,l=(0,n.Z)({},e);return l.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=l&&null!=(o=l.default)&&null!=(o=o.fields)&&o[l.list]||c(t,l,a,i,s),l},d=function(e,t,a,o,l){o(!0);var r={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,s.Z)(r,"zcampaigns_refresh_lists").then((function(e){if(e&&e.success){var s=(0,n.Z)({},t);e.data.lists&&(s.default=(0,n.Z)({},s.default,{lists:e.data.lists})),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),l({show:!0,msg:(0,i.__)("Lists refreshed","integration-for-zoho-campaigns-and-cf7")}),a((0,n.Z)({},s))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:""+(0,i.__)("Lists refresh failed Cause:","integration-for-zoho-campaigns-and-cf7")+(e.data.data||e.data)+". "+(0,i.__)("please try again","integration-for-zoho-campaigns-and-cf7")}):l({show:!0,msg:(0,i.__)("Lists refresh failed. please try again","integration-for-zoho-campaigns-and-cf7")});o(!1)})).catch((function(){return o(!1)}))},c=function(e,t,a,o,l){var r=t.list;if(r){o(!0);var d={formID:e,list:r,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,s.Z)(d,"zcampaigns_refresh_contact_fields").then((function(e){if(e&&e.success){var s=(0,n.Z)({},t);e.data.fields?(s.default.fields||(s.default.fields={}),s.default.fields[r]=e.data,e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),l({show:!0,msg:(0,i.__)("Contact Fields refreshed","integration-for-zoho-campaigns-and-cf7")})):l({show:!0,msg:(0,i.__)("Zoho didn't provide fields names for this list","integration-for-zoho-campaigns-and-cf7")}),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),a((0,n.Z)({},s))}else l({show:!0,msg:(0,i.__)("Contact Fields refresh failed. please try again","integration-for-zoho-campaigns-and-cf7")});o(!1)})).catch((function(){return o(!1)}))}},f=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var a;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(a=a.fields)||null==(a=a[e.list])?void 0:a.required.indexOf(t.zohoFormField))})):[]).length>0)}},7498:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(4222),i=a(9615),s=a(6327),o=a(4937),l=a(4637);function r(e){var t,a,r=e.formID,d=e.formFields,c=e.handleInput,f=e.campaignsConf,u=e.setCampaignsConf,m=e.isLoading,h=e.setIsLoading,g=e.setSnackbar;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)("b",{className:"wdt-100 d-in-b",children:(0,n.__)("List:","integration-for-zoho-campaigns-and-cf7")}),(0,l.jsxs)("select",{onChange:function(e){return c(e)},name:"list",value:f.list,className:"btcd-paper-inp w-7",children:[(0,l.jsx)("option",{value:"",children:(0,n.__)("Select List","integration-for-zoho-campaigns-and-cf7")}),(null==f||null==(t=f.default)?void 0:t.lists)&&Object.values(f.default.lists).map((function(e){return(0,l.jsx)("option",{value:e.listkey,children:e.listname},e.listkey)}))]}),(0,l.jsx)("button",{onClick:function(){return(0,s.refreshLists)(r,f,u,h,g)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Refresh Campaigns Lists","integration-for-zoho-campaigns-and-cf7")+"'"},type:"button",disabled:m,children:"↻"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),m&&(0,l.jsx)(i.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),f.list&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("b",{className:"wdt-100",children:(0,n.__)("Map Fields","integration-for-zoho-campaigns-and-cf7")}),(0,l.jsx)("button",{onClick:function(){return(0,s.refreshContactFields)(r,f,u,h,g)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,n.__)("Refresh Campaigns Contact Fields","integration-for-zoho-campaigns-and-cf7")+"'"},type:"button",disabled:m,children:"↻"})]}),(0,l.jsx)("div",{className:"btcd-hr mt-1"}),(null==(a=f.default)||null==(a=a.fields)?void 0:a[f.list])&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flx flx-around mt-2 mb-2 fitzocacf-field-map-label",children:[(0,l.jsx)("div",{className:"txt-dp",children:(0,l.jsx)("b",{children:(0,n.__)("Form Fields","integration-for-zoho-campaigns-and-cf7")})}),(0,l.jsx)("div",{className:"txt-dp",children:(0,l.jsx)("b",{children:(0,n.__)("Zoho Fields","integration-for-zoho-campaigns-and-cf7")})})]}),f.field_map.map((function(e,t){return(0,l.jsx)(o.default,{i:t,field:e,campaignsConf:f,formFields:d,setCampaignsConf:u},"campaigns-m-"+(t+9))}))]})]})]})}}}]);