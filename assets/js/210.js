"use strict";(self.webpackChunk_frm_in=self.webpackChunk_frm_in||[]).push([[210,672,801],{4356:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(4637);function i(e){var t=e.size,a=void 0===t?14:t,i=e.stroke,l=void 0===i?3:i,o=e.className;return(0,n.jsx)("svg",{className:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 30 30",children:(0,n.jsx)("polyline",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:l,points:"26 15.2 4 15.2 12.38 23.69 4 15.2 12.77 6.31"})})}},5672:(e,t,a)=>{a.r(t),a.d(t,{addFieldMap:()=>v,checkWebhookIntegrationsExist:()=>f,delFieldMap:()=>w,handleAuthorize:()=>h,handleCustomValue:()=>b,handleFieldMapping:()=>C,saveActionConf:()=>g,saveIntegConfig:()=>p,setGrantTokenResponse:()=>m});var n=a(8063),i=a(6370),l=a(986),o=a.n(l),r=a(5274),s=a(9542),c=a(3105),d=a(4222),u=["Webhook","KaliForms","Amelia","WPFunnels","Typebot","JetForm","FluentSupport"],f=function(e){return u.includes(e)},p=function(){var e=(0,i.Z)(o().mark((function e(t,a,n,i,l,r,s,u){var p,g,m,h,_,v,w,C,b,x,I,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m="flow/save",u(!0),h=i,"cond"!==(null==i||null==(p=i.condition)?void 0:p.action_behavior)&&(h.condition={action_behavior:"",actions:[{field:"",action:"value"}],logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]}),"Elementor"===t.triggered_entity&&(h.postId=s?null!=(_=null==t||null==(v=t.flow_details)?void 0:v.postId)?_:null:null!=(w=null==t||null==(C=t.triggerData)?void 0:C.postId)?w:null),b={name:i.name,trigger:t.triggered_entity,triggered_entity_id:null!=t&&null!=(g=t.triggerData)&&g.formID?t.triggerData.formID:t.triggered_entity_id||0,flow_details:h},t.id&&(b.id=t.id),f(t.triggered_entity)&&(b.flow_details.fields=s?null==t||null==(I=t.flow_details)?void 0:I.fields:null==t||null==(x=t.triggerDetail)?void 0:x.data),s&&(m="flow/update"),e.prev=9,e.next=12,(0,c.Z)(b,m);case 12:return y=e.sent,!s&&y.success&&l.push(n),u(!1),e.abrupt("return",y);case 18:return e.prev=18,e.t0=e.catch(9),u(!1),e.abrupt("return",(0,d.__)("Failed to save integration"));case 22:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t,a,n,i,l,o,r,s){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)(o().mark((function e(t){var a,n,i,l,s,u,p,g,m,h,_,v,w,C,b,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.flow,t.setFlow,i=t.allIntegURL,l=t.conf,s=t.history,t.index,u=t.edit,p=t.setIsLoading,t.setSnackbar,g="flow/save",p&&p instanceof Function&&p(!0),m=l,"Elementor"===n.triggered_entity&&(m.postId=u?null!=(h=null==n||null==(_=n.flow_details)?void 0:_.postId)?h:null:null!=(v=null==n||null==(w=n.triggerData)?void 0:w.postId)?v:null),C={name:l.name,trigger:n.triggered_entity,triggered_entity_id:null!=n&&null!=(a=n.triggerData)&&a.formID?n.triggerData.formID:n.triggered_entity_id||0,flow_details:m},n.id&&(C.id=n.id),f(n.triggered_entity)&&(C.flow_details.fields=u?null==n||null==(x=n.flow_details)?void 0:x.fields:null==n||null==(b=n.triggerDetail)?void 0:b.data),u&&(g="flow/update"),e.prev=9,e.next=12,(0,c.Z)(C,g).then((function(e){var t;!u&&e.success&&s.push(i);var a="",n="success";null!=(t=e.data)&&t.msg?a=e.data.msg:e.success?a=u?(0,d.__)("Integration updated successfully"):(0,d.__)("Integration saved successfully"):(n="error",a=u?(0,d.__)("Failed to update integration"):(0,d.__)("Failed to save integration")),(0,r.ZP)(a,{type:n}),p&&p instanceof Function&&p(!1),u||setTimeout((function(){s.push(i)}),700)}));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),p&&p instanceof Function&&p(!1),e.abrupt("return",(0,d.__)("Failed to save integration"));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__"+e,JSON.stringify(t)),window.close()},h=function(e,t,a,i,l,o,r,c,u){if(i.dataCenter&&i.clientId&&i.clientSecret){c(!0);var f="https://accounts.zoho."+i.dataCenter+"/oauth/v2/auth?scope="+a+"&response_type=code&client_id="+i.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(null==s.hi?void 0:s.hi.base)+"/redirect&state="+encodeURIComponent(window.location.href)+"/redirect",p=window.open(f,e,"width=400,height=609,toolbar=off"),g=setInterval((function(){if(p.closed){clearInterval(g);var a={},o=!1,s=localStorage.getItem("__"+e);if(s&&(o=!0,a=JSON.parse(s),localStorage.removeItem("__"+e)),a.code&&!a.error&&a&&o){var f=(0,n.Z)({},i);f.accountServer=a["accounts-server"],_(t,a,f,l,r,c,u)}else{var m=a.error?"Cause: "+a.error:"";u({show:!0,msg:(0,d.__)("Authorization failed")+" "+m+". "+(0,d.__)("please try again")}),c(!1)}}}),500)}else o({dataCenter:i.dataCenter?"":(0,d.__)("Data center cann't be empty"),clientId:i.clientId?"":(0,d.__)("Client ID cann't be empty"),clientSecret:i.clientSecret?"":(0,d.__)("Secret key cann't be empty")})},_=function(e,t,a,i,l,o,r){var u=(0,n.Z)({},t);u.dataCenter=a.dataCenter,u.clientId=a.clientId,u.clientSecret=a.clientSecret,u.redirectURI=(null==s.hi?void 0:s.hi.base)+"/redirect",(0,c.Z)(u,e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,n.Z)({},a);t.tokenDetails=e.data,i(t),l(!0),r({show:!0,msg:(0,d.__)("Authorized Successfully")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,d.__)("Authorization failed Cause:")+(e.data.data||e.data)+". "+(0,d.__)("please try again")}):r({show:!0,msg:(0,d.__)("Authorization failed. please try again")});o(!1)}))},v=function(e,t,a,i,l){var o=(0,n.Z)({},t);l?i?o.relatedlists[l-1].upload_field_map.splice(e,0,{}):o.relatedlists[l-1].field_map.splice(e,0,{}):i?o.upload_field_map.splice(e,0,{}):o.field_map.splice(e,0,{}),a((0,n.Z)({},o))},w=function(e,t,a,i,l){var o=(0,n.Z)({},t);l?i?o.relatedlists[l-1].upload_field_map.length>1&&o.relatedlists[l-1].upload_field_map.splice(e,1):o.relatedlists[l-1].field_map.length>1&&o.relatedlists[l-1].field_map.splice(e,1):i?o.upload_field_map.length>1&&o.upload_field_map.splice(e,1):o.field_map.length>1&&o.field_map.splice(e,1),a((0,n.Z)({},o))},C=function(e,t,a,i,l,o){var r=(0,n.Z)({},a);o?l?r.relatedlists[o-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[o-1].field_map[t][e.target.name]=e.target.value:l?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(o?r.relatedlists[o-1].field_map[t].customValue="":r.field_map[t].customValue=""),i((0,n.Z)({},r))},b=function(e,t,a,i,l){var o=(0,n.Z)({},a);l?o.relatedlists[l-1].field_map[t].customValue=e.target.value:o.field_map[t].customValue=e.target.value,i((0,n.Z)({},o))}},5210:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(8063),i=a(9496),l=a(9892),o=a(4222),r=a(7464),s=a(1675),c=a(6327),d=a(4356),u=a(3681),f=a(5672),p=a(4637);function g(e){var t=e.formID,a=e.campaignsConf,g=e.setCampaignsConf,m=e.step,h=e.setstep,_=e.isLoading,v=e.setIsLoading,w=e.setSnackbar,C=e.redirectLocation,b=e.isInfo,x=(0,i.useState)(!1),I=x[0],y=x[1],z=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:""}),k=z[0],Z=z[1],j=(0,l.sJ)(u.qn),D=function(e){var t=(0,n.Z)({},a),i=(0,n.Z)({},k);i[e.target.name]="",t[e.target.name]=e.target.value,Z(i),g(t)};return(0,p.jsxs)("div",{className:"btcd-stp-page",style:(0,n.Z)({},{width:1===m&&900},{height:1===m&&"auto"}),children:[(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("b",{children:(0,o.__)("Integration Name:","integration-for-zoho-campaigns-and-cf7")})}),(0,p.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:D,name:"name",value:a.name,type:"text",placeholder:(0,o.__)("Integration Name...","integration-for-zoho-campaigns-and-cf7"),disabled:b}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("b",{children:(0,o.__)("Data Center:","integration-for-zoho-campaigns-and-cf7")})}),(0,p.jsxs)("select",{onChange:D,name:"dataCenter",value:a.dataCenter,className:"btcd-paper-inp w-6 mt-1",disabled:b,children:[(0,p.jsx)("option",{value:"",children:(0,o.__)("--Select a data center--","integration-for-zoho-campaigns-and-cf7")}),(0,p.jsx)("option",{value:"com",children:"zoho.com"}),(0,p.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,p.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,p.jsx)("option",{value:"in",children:"zoho.in"}),(0,p.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,p.jsx)("div",{style:{color:"red"},children:k.dataCenter}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("b",{children:(0,o.__)("Homepage URL:","integration-for-zoho-campaigns-and-cf7")})}),(0,p.jsx)(r.Z,{value:""+window.location.origin,className:"field-key-cpy w-6 ml-0",setSnackbar:w,readOnly:b}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("b",{children:(0,o.__)("Authorized Redirect URIs:","integration-for-zoho-campaigns-and-cf7")})}),(0,p.jsx)(r.Z,{value:C||j.api.base+"/redirect",className:"field-key-cpy w-6 ml-0",setSnackbar:w,readOnly:b}),(0,p.jsxs)("small",{className:"d-blk mt-5",children:[(0,o.__)("To get Client ID and SECRET , Please Visit","integration-for-zoho-campaigns-and-cf7")," ",(0,p.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==a?void 0:a.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,o.__)("Zoho API Console","integration-for-zoho-campaigns-and-cf7")})]}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("b",{children:(0,o.__)("Client id:","integration-for-zoho-campaigns-and-cf7")})}),(0,p.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:D,name:"clientId",value:a.clientId,type:"text",placeholder:(0,o.__)("Client id...","integration-for-zoho-campaigns-and-cf7"),disabled:b}),(0,p.jsx)("div",{style:{color:"red"},children:k.clientId}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("b",{children:(0,o.__)("Client secret:","integration-for-zoho-campaigns-and-cf7")})}),(0,p.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:D,name:"clientSecret",value:a.clientSecret,type:"text",placeholder:(0,o.__)("Client secret...","integration-for-zoho-campaigns-and-cf7"),disabled:b}),(0,p.jsx)("div",{style:{color:"red"},children:k.clientSecret}),!b&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("button",{onClick:function(){return(0,f.handleAuthorize)("zohoCampaigns","zcampaigns","ZohoCampaigns.contact.READ,ZohoCampaigns.contact.CREATE,ZohoCampaigns.contact.UPDATE",a,g,Z,y,v,w,j)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:I||_,children:[I?(0,o.__)("Authorized ✔","integration-for-zoho-campaigns-and-cf7"):(0,o.__)("Authorize","integration-for-zoho-campaigns-and-cf7"),_&&(0,p.jsx)(s.Z,{size:20,clr:"#022217",className:"ml-2"})]}),(0,p.jsx)("br",{}),(0,p.jsxs)("button",{onClick:function(){setTimeout((function(){document.getElementById("btcd-settings-wrp").scrollTop=0}),300),h(2),(0,c.refreshLists)(t,a,g,v,w)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!I,children:[(0,o.__)("Next","integration-for-zoho-campaigns-and-cf7"),(0,p.jsx)(d.Z,{className:"ml-1 rev-icn"})]})]})]})}},6327:(e,t,a)=>{a.r(t),a.d(t,{checkMappedFields:()=>u,handleInput:()=>r,listChange:()=>s,refreshContactFields:()=>d,refreshLists:()=>c,setGrantTokenResponse:()=>o});var n=a(8063),i=a(4222),l=a(3105),o=function(){var e={},t=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");t&&t.forEach((function(t){var a=t.split("=");a[1]&&(e[a[0]]=a[1])})),localStorage.setItem("__zohoCampaigns",JSON.stringify(e)),window.close()},r=function(e,t,a,i,l,o){var r=(0,n.Z)({},a);if(r[e.target.name]=e.target.value,"list"===e.target.name)r=s(r,t,i,l,o);i((0,n.Z)({},r))},s=function(e,t,a,i,l){var o,r=(0,n.Z)({},e);return r.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=r&&null!=(o=r.default)&&null!=(o=o.fields)&&o[r.list]||d(t,r,a,i,l),r},c=function(e,t,a,o,r){o(!0);var s={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(s,"zcampaigns_refresh_lists").then((function(e){if(e&&e.success){var l=(0,n.Z)({},t);e.data.lists&&(l.default=(0,n.Z)({},l.default,{lists:e.data.lists})),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Lists refreshed","integration-for-zoho-campaigns-and-cf7")}),a((0,n.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,i.__)("Lists refresh failed Cause:","integration-for-zoho-campaigns-and-cf7")+(e.data.data||e.data)+". "+(0,i.__)("please try again","integration-for-zoho-campaigns-and-cf7")}):r({show:!0,msg:(0,i.__)("Lists refresh failed. please try again","integration-for-zoho-campaigns-and-cf7")});o(!1)})).catch((function(){return o(!1)}))},d=function(e,t,a,o,r){var s=t.list;if(s){o(!0);var c={formID:e,list:s,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(c,"zcampaigns_refresh_contact_fields").then((function(e){if(e&&e.success){var l=(0,n.Z)({},t);e.data.fields?(l.default.fields||(l.default.fields={}),l.default.fields[s]=e.data,e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Contact Fields refreshed","integration-for-zoho-campaigns-and-cf7")})):r({show:!0,msg:(0,i.__)("Zoho didn't provide fields names for this list","integration-for-zoho-campaigns-and-cf7")}),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),a((0,n.Z)({},l))}else r({show:!0,msg:(0,i.__)("Contact Fields refresh failed. please try again","integration-for-zoho-campaigns-and-cf7")});o(!1)})).catch((function(){return o(!1)}))}},u=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var a;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(a=a.fields)||null==(a=a[e.list])?void 0:a.required.indexOf(t.zohoFormField))})):[]).length>0)}}}]);