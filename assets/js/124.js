"use strict";(self.webpackChunk_frm_in=self.webpackChunk_frm_in||[]).push([[124],{4054:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(4637);function r(e){var t=e.size,n=void 0===t?15:t,r=e.stroke,i=void 0===r?2:r;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 30 30",children:[(0,s.jsx)("polyline",{className:"svg-icn",points:"4 7.68 6.44 7.68 26 7.68"}),(0,s.jsx)("path",{className:"svg-icn",strokeWidth:i,d:"M23.56,7.68V24.76a2.45,2.45,0,0,1-2.45,2.44H8.89a2.45,2.45,0,0,1-2.45-2.44V7.68m3.67,0V5.24A2.45,2.45,0,0,1,12.56,2.8h4.88a2.45,2.45,0,0,1,2.45,2.44V7.68"}),(0,s.jsx)("line",{className:"svg-icn",strokeWidth:i,x1:"12.56",y1:"13.78",x2:"12.56",y2:"21.1"}),(0,s.jsx)("line",{className:"svg-icn",strokeWidth:i,x1:"17.44",y1:"13.78",x2:"17.44",y2:"21.1"})]})}},4124:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var s=n(8063),r=n(9496),i=n(5274),a=n(8736),o=n(9615),c=n(821),l=n(8874),u=n(4637);function d(e){var t=e.className,n=e.stroke,s=void 0===n?2:n,r=e.size,i=void 0===r?14:r;return(0,u.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 30 30",children:[(0,u.jsx)("path",{className:"svg-icn",strokeWidth:s,d:"M13.83,6.32H6.11a2.19,2.19,0,0,0-2.2,2.19v15.3A2.19,2.19,0,0,0,6.11,26H21.55a2.19,2.19,0,0,0,2.2-2.19V16.16"}),(0,u.jsx)("path",{className:"svg-icn",strokeWidth:s,d:"M22.1,4.68a2.35,2.35,0,0,1,3.31,0,2.31,2.31,0,0,1,0,3.28L14.93,18.35l-4.41,1.09,1.11-4.37Z"})]})}function h(e){var t=e.size,n=void 0===t?30:t,s=e.stroke,r=void 0===s?2:s;return(0,u.jsxs)("svg",{width:n,height:n,viewBox:"0 0 30 30",children:[(0,u.jsx)("ellipse",{className:"svg-icn",strokeWidth:r,strokeMiterlimit:"10",cx:"15",cy:"15",rx:"11",ry:"11.09"}),(0,u.jsx)("ellipse",{className:"svg-icn",strokeWidth:2,strokeMiterlimit:"10",cx:"15",cy:"11",rx:"1",ry:"1"}),(0,u.jsx)("line",{className:"svg-icn",strokeWidth:r-.5,strokeLinecap:"round",strokeLinejoin:"round",x1:"15",y1:"18",x2:"15",y2:"21.72"})]})}function f(e){var t=e.size;return(0,u.jsxs)("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 215 215",children:[(0,u.jsx)("rect",{className:"cls-1",fill:"none",strokeWidth:"16",stroke:"currentColor",strokeMiterlimit:"10",x:"19.91",y:"20.9",width:"174",height:"174",rx:"85"}),(0,u.jsx)("path",{fill:"currentColor",className:"cls-2",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"4",d:"M138.3,151.06,99.23,113.52a6,6,0,0,1-1.85-4.34V56.47a6,6,0,0,1,6-6h0a6,6,0,0,1,6,6v47.59a6,6,0,0,0,1.85,4.33l35.37,34a6,6,0,0,1,.17,8.51h0A6,6,0,0,1,138.3,151.06Z"})]})}var m=n(4054);function x(e){var t=(0,r.useRef)(null),n=(0,r.useRef)(null),s=(0,r.useState)(!1),i=s[0],o=s[1],c=function e(n){i&&t.current&&!t.current.contains(n.target)&&o(!1),document.removeEventListener("click",e)};return(0,r.useEffect)((function(){n.current.parentNode.parentNode.parentNode.style.zIndex=i?"10":"auto",i||n.current.blur(),document.addEventListener("click",c)}),[i]),(0,u.jsxs)("div",{className:"btcd-menu",children:[(0,u.jsx)("button",{ref:n,className:"btcd-menu-btn btcd-mnu sh-sm",onClick:function(){return o((function(e){return!e}))},"aria-label":"toggle menu",type:"button"}),(0,u.jsxs)("div",{ref:t,className:"btcd-menu-list "+(i?"btcd-m-a":""),children:[(0,u.jsxs)(a.rU,{to:"/flow/action/info/"+e.id+"/"+e.name,type:"button",className:"flx","aria-label":"actions",children:[(0,u.jsx)(h,{size:16}),"  Info"]}),(0,u.jsxs)(a.rU,{to:"/flow/action/log/"+e.id+"/"+e.name,type:"button",className:"flx","aria-label":"actions",children:[(0,u.jsx)(f,{size:16}),"  Timeline"]}),(0,u.jsxs)(a.rU,{to:"/flow/action/edit/"+e.id,type:"button",className:"flx","aria-label":"actions",children:[(0,u.jsx)(d,{size:16}),"  Edit"]}),(0,u.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.dup,children:[(0,u.jsx)(l.Z,{size:16}),"  Clone"]}),(0,u.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.del,children:[(0,u.jsx)(m.Z,{size:16}),"  Delete"]})]})]})}var g=n(3862),b=n(5681),w=n(1890),v=n(2913),_=n(9542),j=n(580),k=n(3105),p=n(4222),y=(0,r.lazy)((function(){return n.e(248).then(n.bind(n,5248))}));function N(){var e,t=(0,j.Z)({payload:{},action:"flow/list",method:"get"}),n=t.data,l=t.isLoading,d=(0,r.useState)(!l&&n.success&&null!=n&&null!=(e=n.data)&&e.integrations?n.data.integrations:[]),h=d[0],f=d[1],m=(0,r.useState)({show:!1}),N=m[0],Z=m[1],C=(0,r.useState)({show:!1,btnTxt:""}),W=C[0],S=C[1],z=(0,r.useState)({show:!1,msg:""}),T=z[0],I=z[1],A=(0,r.useState)([{width:250,minWidth:80,Header:(0,p.__)("Trigger"),accessor:"triggered_entity"},{width:250,minWidth:80,Header:(0,p.__)("Action Name"),accessor:"name"},{width:200,minWidth:200,Header:(0,p.__)("Created At"),accessor:"created_at"},{width:70,minWidth:60,Header:(0,p.__)("Status"),accessor:"status",Cell:function(e){return(0,u.jsx)(b.Z,{className:"flx",action:function(t){return M(t,e.row.original.id)},checked:1===Number(e.row.original.status)})}}]),H=A[0],E=A[1];(0,r.useEffect)((function(){var e;!l&&n.success&&(null==n||null==(e=n.data)?void 0:e.integrations)&&f(n.data.integrations)}),[n]),(0,r.useEffect)((function(){var e=H.filter((function(e){return"t_action"!==e.accessor&&"status"!==e.accessor}));e.push({width:70,minWidth:60,Header:(0,p.__)("Status"),accessor:"status",Cell:function(e){return(0,u.jsx)(b.Z,{className:"flx",action:function(t){return M(t,e.row.original.id)},checked:1===Number(e.row.original.status)})}}),e.push({sticky:"right",width:100,minWidth:60,Header:"Actions",accessor:"t_action",Cell:function(e){return(0,u.jsx)(x,{id:e.row.original.id,name:e.row.original.name,index:e.row.id,del:function(){return V(e.row.original.id,e.row.index)},dup:function(){return D(e.row.original.id,e.row.index)}})}}),E([].concat(e))}),[h]);var M=function(e,t){var n=e.target.checked,s=[].concat(h);s.find((function(e){return e.id===t})).status=!0===n?"1":"0",f(s);var r={id:t,status:n};(0,k.Z)(r,"flow/toggleStatus").then((function(e){i.ZP.success((0,p.__)(e.data))})).catch((function(){i.ZP.error((0,p.__)("Something went wrong"))}))},L=(0,r.useCallback)((function(e){for(var t=[],n=[],s=0;s<e.length;s+=1)t.push(e[s].id),n.push(e[s].original.id);var r=(0,k.Z)({flowID:n},"flow/bulk-delete").then((function(e){if(e.success){for(var n=[].concat(h),s=t.length-1;s>=0;s-=1)n.splice(Number(t[s]),1);return f(n),"Integration Deleted Successfully"}return e.data}));i.ZP.promise(r,{success:function(e){return e},error:(0,p.__)("Error Occurred"),loading:(0,p.__)("delete...")})}),[h]),P=(0,r.useCallback)((function(e){E(e)}),[]),B=function(){W.show=!1,S((0,s.Z)({},W))},V=function(e,t){W.action=function(){!function(e,t){var n=(0,k.Z)({id:e},"flow/delete").then((function(e){if(e.success){var n=[].concat(h);return n.splice(t,1),f(n),"Integration deleted successfully"}return e.data}));i.ZP.promise(n,{success:function(e){return e},error:(0,p.__)("Error Occurred"),loading:(0,p.__)("delete...")})}(e,t),B()},W.btnTxt=(0,p.__)("Delete"),W.btn2Txt=null,W.btnClass="",W.body=(0,p.__)("Are you sure to delete this Integration?"),W.show=!0,S((0,s.Z)({},W))},D=function(e){W.action=function(){!function(e){var t=(0,k.Z)({id:e},"flow/clone").then((function(t){if(t.success){var n=t.data,s=[].concat(h),r=s.find((function(t){return t.id===e})),i={id:n.id,name:"duplicate of "+r.name,triggered_entity:r.triggered_entity,status:r.status,created_at:n.created_at};return s.push(i),f(s),"Integration clone successfully"}return t.data}));i.ZP.promise(t,{success:function(e){return e},error:(0,p.__)("Error Occurred"),loading:(0,p.__)("cloning...")})}(e),B()},W.btnTxt=(0,p.__)("Clone"),W.btn2Txt=null,W.btnClass="blue",W.body=(0,p.__)("Are you sure to clone this Integration ?"),W.show=!0,S((0,s.Z)({},W))};return l?(0,u.jsx)(o.default,{style:{display:"flex",height:"82vh",justifyContent:"center",alignItems:"center"}}):(0,u.jsxs)("div",{id:"all-forms",children:[(0,u.jsx)(w.Z,{snack:N,setSnackbar:Z}),(0,u.jsx)(c.Z,{show:W.show,body:W.body,action:W.action,close:B,btnTxt:W.btnTxt,btn2Txt:W.btn2Txt,btn2Action:W.btn2Action,btnClass:W.btnClass}),h&&null!=h&&h.length?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"af-header flx flx-between",children:[(0,u.jsx)("h2",{children:(0,p.__)("Integrations")}),(0,u.jsx)(a.rU,{to:"/flow/new",className:"btn round btcd-btn-lg blue blue-sh",children:(0,p.__)("Create Integration")})]}),(0,u.jsx)("div",{className:"forms",children:(0,u.jsx)(v.Z,{className:"f-table btcd-all-frm",height:500,columns:H,data:h,rowSeletable:!0,resizable:!0,columnHidable:!0,setTableCols:P,setBulkDelete:L,search:!0})})]}):(0,u.jsx)(y,{}),(0,u.jsxs)(g.Z,{sm:!0,show:T.show,setModal:function(){return I({show:!1})},title:(0,p.__)("Premium Feature"),className:"pro-modal",children:[(0,u.jsx)("h4",{className:"txt-center mt-5",children:T.msg}),(0,u.jsx)("div",{className:"txt-center",children:(0,u.jsx)("a",{href:_.S$,target:"_blank",rel:"noreferrer",children:(0,u.jsx)("button",{className:"btn btn-lg blue",type:"button",children:(0,p.__)("Buy Premium")})})})]})]})}const Z=(0,r.memo)(N)}}]);